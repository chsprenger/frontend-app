import {BoundingBox, Geometry, GridSize} from '../../../core/model/modflow';
import {distanceWeighting} from '../../../services/geoTools/interpolation';

test('WeightedDistance', () => {
    const area = Geometry.fromObject({
        type: 'Polygon',
        coordinates: [[
            [-34.873584970714447, -8.074729414137702], [-34.873646024272325, -8.074880467255257],
            [-34.874316343047425, -8.076974965146924], [-34.874542801675936, -8.077582194305839],
            [-34.875243305945929, -8.078797132121842], [-34.875553970106019, -8.079726768494421],
            [-34.875656528241009, -8.080016539997205], [-34.876441480334428, -8.081769819081755],
            [-34.876742657140625, -8.082442525765519], [-34.87719309575882, -8.083869739752316],
            [-34.877564547243431, -8.084657781634947], [-34.877909732362134, -8.085390094994787],
            [-34.878279303725826, -8.086618291430085], [-34.878983416413718, -8.088626297906581],
            [-34.879666480740909, -8.089136521867681], [-34.87976816979841, -8.089319928511699],
            [-34.879886177696115, -8.089711505127971], [-34.879942116528703, -8.090046684864202],
            [-34.8799751724315, -8.090093286548779], [-34.88019666289491, -8.090307336928619],
            [-34.880527809050406, -8.090899591497269], [-34.880759952797305, -8.091433367929111],
            [-34.880830284254721, -8.091704348873719], [-34.880843957475513, -8.092024182605842],
            [-34.880768188445202, -8.093884102202631], [-34.881374823482204, -8.096294820598029],
            [-34.881747443538409, -8.097280988639453], [-34.882291989279892, -8.098722159073121],
            [-34.883067391349826, -8.100314652591619], [-34.883686268523817, -8.10141238910688],
            [-34.883828300205806, -8.101617372990491], [-34.884418794596399, -8.102414075191138],
            [-34.884623946841508, -8.10267696541001], [-34.884672847183801, -8.102738594893735],
            [-34.884696401033814, -8.102806250598691], [-34.884762700780612, -8.102893624748885],
            [-34.884807817540299, -8.103011850049523], [-34.884860395929707, -8.103137443470411],
            [-34.884898050256211, -8.103248301523871], [-34.88496603520872, -8.103492257521779],
            [-34.885029796715791, -8.103630091090178], [-34.885123289380694, -8.103765409441715],
            [-34.885168371933013, -8.103876233092921], [-34.885243543143908, -8.10406834101669],
            [-34.886053859070394, -8.105811495394592], [-34.886248804764897, -8.106202906712605],
            [-34.886368887964217, -8.106468827088451], [-34.886582783263187, -8.106941573730287],
            [-34.886702497520197, -8.107196934135374], [-34.886979897742201, -8.107679947846332],
            [-34.887137845680876, -8.108101137353724], [-34.887738395691805, -8.109340707748565],
            [-34.887828666731302, -8.109540605664058], [-34.888258775107708, -8.110423380535391],
            [-34.888659448762098, -8.111280251662068], [-34.888719560874776, -8.111398678622052],
            [-34.889135396826063, -8.112262401034021], [-34.890091376548781, -8.11392430013658],
            [-34.891270892931686, -8.115695475137013], [-34.892291274240876, -8.11741835773242],
            [-34.893252146493964, -8.119012944614628], [-34.894155023283076, -8.120631049326825],
            [-34.895014114786974, -8.122077990235333], [-34.895140456817884, -8.122021348999983],
            [-34.895754005349573, -8.123037947941462], [-34.896012218246469, -8.123559387866228],
            [-34.896212013797452, -8.124121679703434], [-34.896247793830554, -8.124222376505317],
            [-34.896632753417961, -8.125350105972592], [-34.89664087160466, -8.125373888683225],
            [-34.89714971835275, -8.126652957248456], [-34.89722098916117, -8.126871651295279],
            [-34.897616484283667, -8.128087792141052], [-34.897929341010048, -8.128755127944761],
            [-34.898045600018193, -8.128978617453813], [-34.898142198056668, -8.129164310765319],
            [-34.898227252805178, -8.129380798270173], [-34.898272621442651, -8.129470166586753],
            [-34.898584764753444, -8.130134960625989], [-34.898845158981864, -8.130699083242474],
            [-34.898850491559259, -8.13071116568417], [-34.898903979857238, -8.130684317918092],
            [-34.899452745237738, -8.132005016063104], [-34.899492681857474, -8.132104986252507],
            [-34.899737708157559, -8.13276658708787], [-34.899778044456234, -8.132864693857275],
            [-34.900381650169059, -8.134176833451136], [-34.900427569917248, -8.134297419049693],
            [-34.900940208440041, -8.135663992583353], [-34.901458576551732, -8.137151069593502],
            [-34.902140943796844, -8.139188499810617], [-34.902794181619257, -8.140996634777158],
            [-34.903143838723437, -8.141854181435674], [-34.903192868297346, -8.14197442715237],
            [-34.903808726765142, -8.143318667616555], [-34.904745461781438, -8.145198903113227],
            [-34.905416756530641, -8.146741127308262], [-34.90551470913335, -8.146936958811308],
            [-34.905751278504354, -8.147428650355256], [-34.905987796644638, -8.14793870170471],
            [-34.906000442075843, -8.147962371390285], [-34.906269886745932, -8.148693570290547],
            [-34.906343269581342, -8.148871522274611], [-34.906616663449825, -8.149567270696139],
            [-34.906634785752239, -8.14962031672467], [-34.907082387431039, -8.15093047144407],
            [-34.907138310079219, -8.151080252170267], [-34.907775534385323, -8.152620195219084],
            [-34.907875814391424, -8.15286229291979], [-34.907964575371729, -8.153056930574168],
            [-34.908076041947837, -8.153276468731239], [-34.908178831931934, -8.153518554455575],
            [-34.908267582311119, -8.153710691369408], [-34.908413534137217, -8.154057603855788],
            [-34.908492245636126, -8.154249787936841], [-34.908583588082131, -8.154459417965898],
            [-34.90867626936965, -8.154686546207742], [-34.908766345407521, -8.154893681460592],
            [-34.908805725848119, -8.154980118821921], [-34.908867821157223, -8.155123267666124],
            [-34.908955288881828, -8.15533256067325], [-34.908752784190519, -8.155420746314869],
            [-34.908789119286517, -8.15550411554233], [-34.909856085981026, -8.158171639998752],
            [-34.910307931992016, -8.159391751797457], [-34.917905929594163, -8.157303300226454],
            [-34.917897093230899, -8.155450021284096], [-34.91880928622227, -8.152670242792164],
            [-34.920338413803485, -8.149887543283217], [-34.920168743984298, -8.146651818936402],
            [-34.919696518018299, -8.144656085072828], [-34.92091422563017, -8.141260104265866],
            [-34.921845028032699, -8.140487249019085], [-34.921832528929464, -8.137865541206496],
            [-34.922597045493788, -8.136469673726825], [-34.922584590844949, -8.133857006929748],
            [-34.923655359461044, -8.131998621230215], [-34.925351369716999, -8.129983583705922],
            [-34.925962413348934, -8.12875117256149], [-34.926569786873522, -8.126750331391655],
            [-34.926255425425389, -8.125513264386585], [-34.926241455243421, -8.122584189382515],
            [-34.92794186489359, -8.121500308212566], [-34.932723015954053, -8.119624314604046],
            [-34.936277741956012, -8.119300038233014], [-34.939978562612133, -8.11728446386199],
            [-34.940897944869477, -8.116041534278493], [-34.941668526765952, -8.114039912870082],
            [-34.942275030619712, -8.111876345407797], [-34.94257535091068, -8.110184343378615],
            [-34.942103062086652, -8.108179607880736], [-34.941162048713146, -8.106800896985659],
            [-34.939455304204081, -8.104648343569846], [-34.939131371965274, -8.101413385187081],
            [-34.939120293008777, -8.09909906929105], [-34.940341498764489, -8.096480558716179],
            [-34.9418860345639, -8.095080975934765], [-34.943728482202609, -8.093381635317735],
            [-34.945738578030522, -8.092594578509695], [-34.947122791698042, -8.091819539390935],
            [-34.94820100485903, -8.089662766657568], [-34.948960937108808, -8.087344784002463],
            [-34.94956665515133, -8.085027537532397], [-34.950952313474033, -8.084559861184392],
            [-34.95265989043947, -8.085012767496584], [-34.952974266906082, -8.086249804808158],
            [-34.953906918565558, -8.087782218700157], [-34.956536799456117, -8.087615943433885],
            [-34.960550835996912, -8.086674577180256], [-34.962869264088603, -8.085885971377065],
            [-34.96440389899243, -8.084341731696425], [-34.966256005133303, -8.082795961731378],
            [-34.96824648278438, -8.079857305185298], [-34.969788611505798, -8.077996606659319],
            [-34.97055366644404, -8.076763433710228], [-34.969466749821848, -8.075222768290208],
            [-34.970072385832722, -8.072914562594383], [-34.971459456555493, -8.072754196532314],
            [-34.972077834296442, -8.071205318520429], [-34.971288817048489, -8.069364888793606],
            [-34.9689646050916, -8.067061741905066], [-34.966637335720279, -8.065997121098667],
            [-34.964458408998894, -8.06490480499993], [-34.96347840699891, -8.066024817999923]
        ]]
    });

    const boundingBox = BoundingBox.fromGeoJson(area.toGeoJSON());
    const gridSize = GridSize.fromArray([20, 20]);
    const points = [
        {x: -34.963141937481986, y: -8.071148529940587, z: 200},
        {x: -34.953844033064037, y: -8.082329554240646, z: 150},
        {x: -34.931364289471283, y: -8.085389624049084, z: 145},
        {x: -34.941132973859759, y: -8.089744338776475, z: 142},
        {x: -34.92477336988388, y: -8.097512208290201, z: 141},
        {x: -34.937131344110263, y: -8.109870182516584, z: 210},
        {x: -34.916770110384888, y: -8.119168086934529, z: 165},
        {x: -34.905118306114304, y: -8.092922103577544, z: 145},
        {x: -34.890053347057382, y: -8.088802778835419, z: 86},
        {x: -34.899939726438483, y: -8.110340962487113, z: 82},
        {x: -34.906766036011156, y: -8.135527690910406, z: 80}
    ];

    const raster = distanceWeighting(area, boundingBox, gridSize, points);

    expect(raster).toEqual([[0]]);
});
